<!-- fase1 -->
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fase 1: Explora el Problema - Suba en Sinton√≠a</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .header p {
            color: #7f8c8d;
            font-size: 1.2em;
            font-weight: 300;
        }

        .phase-title {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(238, 90, 36, 0.3);
        }

        .map-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        .map-area {
            position: relative;
            width: 100%;
            height: 500px;
            background: linear-gradient(to bottom, #87CEEB 0%, #98FB98 50%, #90EE90 100%);
            border-radius: 15px;
            border: 3px solid #2c3e50;
            overflow: hidden;
        }

        .zone {
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            transition: all 0.3s ease;
            border: 3px solid white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .zone:hover {
            transform: scale(1.2);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .zone.active {
            transform: scale(1.3);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7); }
            50% { box-shadow: 0 0 0 15px rgba(255, 255, 255, 0); }
        }

        .zone.nature {
            background: linear-gradient(45deg, #2ecc71, #27ae60);
            top: 20%;
            left: 15%;
        }

        .zone.traffic {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            top: 60%;
            right: 20%;
        }

        .zone.construction {
            background: linear-gradient(45deg, #f39c12, #d35400);
            top: 30%;
            right: 30%;
        }

        .zone.residential {
            background: linear-gradient(45deg, #3498db, #2980b9);
            bottom: 20%;
            left: 25%;
        }

        .info-panel {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(44, 62, 80, 0.95);
            color: white;
            padding: 20px;
            border-radius: 15px;
            width: 300px;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .info-panel.active {
            transform: translateX(0);
        }

        .decibel-meter {
            width: 100%;
            height: 30px;
            background: linear-gradient(to right, #2ecc71 0%, #f1c40f 50%, #e74c3c 100%);
            border-radius: 15px;
            margin: 15px 0;
            position: relative;
            overflow: hidden;
        }

        .decibel-indicator {
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            transition: width 0.5s ease;
            position: relative;
        }

        .decibel-indicator::after {
            content: '';
            position: absolute;
            right: -2px;
            top: 0;
            height: 100%;
            width: 4px;
            background: white;
            border-radius: 2px;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
        }

        .audio-controls {
            text-align: center;
            margin-top: 15px;
        }

        .play-btn {
            background: linear-gradient(45deg, #9b59b6, #8e44ad);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);
        }

        .play-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 69, 19, 0.4);
        }

        .play-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .legend {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .legend-item {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .legend-item:hover {
            transform: translateY(-5px);
        }

        .legend-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
        }

        .instructions {
            background: rgba(52, 152, 219, 0.1);
            border: 2px solid #3498db;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
        }

        .instructions h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s ease;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .error-message {
            background: rgba(231, 76, 60, 0.1);
            border: 1px solid #e74c3c;
            color: #c0392b;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            font-size: 12px;
        }

        /* C√ÅPSULAS DE INFORMACI√ìN */
        .capsules-section {
            margin: 40px 0;
        }

        .capsules-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }

        .capsule {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .capsule:hover {
            transform: translateY(-5px);
        }

        .capsule-header {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid #ecf0f1;
        }

        .capsule-icon {
            font-size: 40px;
            margin-right: 15px;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: linear-gradient(45deg, #3498db, #2980b9);
        }

        .health-capsule .capsule-icon {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
        }

        .nature-capsule .capsule-icon {
            background: linear-gradient(45deg, #2ecc71, #27ae60);
        }

        .capsule-header h3 {
            color: #2c3e50;
            font-size: 24px;
            margin: 0;
        }

        .effect-item, .nature-item {
            display: flex;
            align-items: flex-start;
            margin: 20px 0;
            padding: 15px;
            background: rgba(52, 152, 219, 0.1);
            border-radius: 10px;
            border-left: 4px solid #3498db;
        }

        .effect-icon, .nature-icon {
            font-size: 30px;
            margin-right: 15px;
            min-width: 40px;
        }

        .effect-text h4, .nature-text h4 {
            color: #2c3e50;
            margin: 0 0 5px 0;
            font-size: 16px;
        }

        .effect-text p, .nature-text p {
            color: #7f8c8d;
            margin: 0 0 10px 0;
            font-size: 14px;
            line-height: 1.4;
        }

        .health-scale, .ecosystem-info {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 2px solid #ecf0f1;
        }

        .health-scale h4, .ecosystem-info h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            text-align: center;
        }

        .scale-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            margin: 8px 0;
            border-radius: 8px;
            font-size: 14px;
        }

        .scale-item.safe { background: rgba(46, 204, 113, 0.2); }
        .scale-item.moderate { background: rgba(241, 196, 15, 0.2); }
        .scale-item.dangerous { background: rgba(243, 156, 18, 0.2); }
        .scale-item.harmful { background: rgba(231, 76, 60, 0.2); }

        .scale-db {
            font-weight: bold;
            min-width: 70px;
        }

        .scale-desc {
            flex: 1;
            text-align: center;
            font-style: italic;
        }

        .scale-status {
            font-weight: bold;
            min-width: 80px;
            text-align: right;
        }

        .impact-bar {
            width: 100%;
            height: 8px;
            background: #ecf0f1;
            border-radius: 4px;
            overflow: hidden;
            position: relative;
            margin-top: 8px;
        }

        .impact-fill {
            height: 100%;
            background: linear-gradient(to right, #f39c12, #e74c3c);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .impact-bar span {
            position: absolute;
            right: 10px;
            top: -25px;
            font-size: 12px;
            color: #7f8c8d;
            font-weight: bold;
        }

        .ecosystem-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }

        .eco-item {
            display: flex;
            align-items: center;
            padding: 10px;
            background: rgba(46, 204, 113, 0.1);
            border-radius: 8px;
            font-size: 14px;
        }

        .eco-emoji {
            font-size: 20px;
            margin-right: 10px;
        }

        /* ENCUESTA */
        .survey-section {
            margin: 40px 0;
        }

        .survey-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .survey-intro {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border-radius: 15px;
        }

        .survey-intro h3 {
            margin: 0 0 10px 0;
            font-size: 24px;
        }

        .survey-intro p {
            margin: 0;
            opacity: 0.9;
            font-size: 16px;
        }

        .question-card {
            margin: 30px 0;
            padding: 25px;
            background: rgba(52, 152, 219, 0.05);
            border-radius: 15px;
            border: 2px solid #ecf0f1;
            transition: border-color 0.3s ease;
        }

        .question-card.answered {
            border-color: #2ecc71;
            background: rgba(46, 204, 113, 0.1);
        }

        .question-card h4 {
            color: #2c3e50;
            margin: 0 0 20px 0;
            font-size: 18px;
            text-align: center;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .option-btn {
            background: white;
            border: 2px solid #bdc3c7;
            border-radius: 10px;
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            min-height: 60px;
        }

        .option-btn:hover {
            border-color: #3498db;
            background: rgba(52, 152, 219, 0.1);
            transform: translateY(-2px);
        }

        .option-btn.selected {
            background: linear-gradient(45deg, #2ecc71, #27ae60);
            color: white;
            border-color: #27ae60;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3);
        }

        .survey-btn {
            background: linear-gradient(45deg, #9b59b6, #8e44ad);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            display: block;
            margin: 30px auto;
            box-shadow: 0 5px 15px rgba(139, 69, 19, 0.3);
        }

        .survey-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 69, 19, 0.4);
        }

        .survey-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .results-section {
            margin-top: 40px;
            padding: 30px;
            background: rgba(52, 152, 219, 0.1);
            border-radius: 15px;
        }

        .results-section h3 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .result-chart {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .chart-title {
            font-size: 16px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
            text-align: center;
        }

        .chart-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 10px 0;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 5px;
        }

        .bar-label {
            font-size: 14px;
            min-width: 120px;
        }

        .bar-visual {
            flex: 1;
            height: 20px;
            background: #ecf0f1;
            border-radius: 10px;
            margin: 0 10px;
            overflow: hidden;
        }

        .bar-fill {
            height: 100%;
            background: linear-gradient(to right, #3498db, #2980b9);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .bar-percentage {
            font-size: 14px;
            font-weight: bold;
            color: #2c3e50;
            min-width: 40px;
            text-align: right;
        }

        @media (max-width: 768px) {
            .info-panel {
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%) scale(0);
                width: 90%;
                max-width: 350px;
                z-index: 1000;
            }

            .info-panel.active {
                transform: translate(-50%, -50%) scale(1);
            }

            .zone {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }

            .capsules-container {
                grid-template-columns: 1fr;
            }

            .options-grid {
                grid-template-columns: 1fr;
            }

            .ecosystem-grid {
                grid-template-columns: 1fr;
            }

            .results-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéµ Suba en Sinton√≠a üåø</h1>
            <p>Un Desaf√≠o por el Silencio y la Naturaleza</p>
        </div>

        <div class="phase-title">
            <h2>Fase 1: ¬øQu√© es lo que realmente escuchamos?</h2>
            <p>Explora el mapa sonoro de Suba y descubre los diferentes niveles de ruido</p>
        </div>

        <div class="instructions">
            <h3>üéØ Instrucciones</h3>
            <p>Haz clic en cada √≠cono del mapa para explorar los diferentes ambientes sonoros de Suba. Escucha los audios y observa los niveles de decibelios.</p>
        </div>

        <div class="map-container">
            <h3 style="text-align: center; margin-bottom: 20px; color: #2c3e50;">üó∫Ô∏è Mapa Sonoro Interactivo de Suba</h3>
            
            <div class="map-area">
                <div class="zone nature" data-zone="nature">üå≥</div>
                <div class="zone traffic" data-zone="traffic">üöó</div>
                <div class="zone construction" data-zone="construction">üèóÔ∏è</div>
                <div class="zone residential" data-zone="residential">üè†</div>
            </div>

            <div class="info-panel" id="infoPanel">
                <button class="close-btn" onclick="closePanel()">√ó</button>
                <div id="panelContent"></div>
            </div>
        </div>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-icon" style="background: linear-gradient(45deg, #2ecc71, #27ae60);">üå≥</div>
                <h4>Humedal La Conejera</h4>
                <p>Sonidos naturales - Ambiente saludable</p>
            </div>
            <div class="legend-item">
                <div class="legend-icon" style="background: linear-gradient(45deg, #e74c3c, #c0392b);">üöó</div>
                <h4>V√≠a Principal</h4>
                <p>Tr√°fico vehicular - Sonido de riesgo</p>
            </div>
            <div class="legend-item">
                <div class="legend-icon" style="background: linear-gradient(45deg, #f39c12, #d35400);">üèóÔ∏è</div>
                <h4>Zona de Construcci√≥n</h4>
                <p>Maquinaria pesada - Sonido perjudicial</p>
            </div>
            <div class="legend-item">
                <div class="legend-icon" style="background: linear-gradient(45deg, #3498db, #2980b9);">üè†</div>
                <h4>Zona Residencial</h4>
                <p>Vida cotidiana - Sonido molesto</p>
            </div>
        </div>

        <!-- C√ÅPSULAS DE INFORMACI√ìN -->
        <div class="capsules-section">
            <h2 style="text-align: center; color: #2c3e50; margin: 40px 0 30px;">üìö C√°psulas de Informaci√≥n</h2>
            
            <div class="capsules-container">
                <div class="capsule health-capsule">
                    <div class="capsule-header">
                        <div class="capsule-icon">üè•</div>
                        <h3>El Ruido y tu Salud</h3>
                    </div>
                    <div class="capsule-content">
                        <div class="health-effects">
                            <div class="effect-item">
                                <div class="effect-icon">üò¥</div>
                                <div class="effect-text">
                                    <h4>Problemas de Sue√±o</h4>
                                    <p>El ruido nocturno puede interrumpir el sue√±o profundo</p>
                                </div>
                            </div>
                            <div class="effect-item">
                                <div class="effect-icon">üò∞</div>
                                <div class="effect-text">
                                    <h4>Estr√©s y Ansiedad</h4>
                                    <p>Exposici√≥n prolongada aumenta los niveles de cortisol</p>
                                </div>
                            </div>
                            <div class="effect-item">
                                <div class="effect-icon">üß†</div>
                                <div class="effect-text">
                                    <h4>Concentraci√≥n</h4>
                                    <p>Reduce la capacidad de enfoque y aprendizaje</p>
                                </div>
                            </div>
                            <div class="effect-item">
                                <div class="effect-icon">üëÇ</div>
                                <div class="effect-text">
                                    <h4>P√©rdida Auditiva</h4>
                                    <p>Exposici√≥n a +85dB puede da√±ar permanentemente</p>
                                </div>
                            </div>
                        </div>
                        <div class="health-scale">
                            <h4>üìä Escala de Riesgo Auditivo</h4>
                            <div class="scale-item safe">
                                <span class="scale-db">0-40 dB</span>
                                <span class="scale-desc">Silencio - Biblioteca</span>
                                <span class="scale-status">‚úÖ Seguro</span>
                            </div>
                            <div class="scale-item moderate">
                                <span class="scale-db">41-70 dB</span>
                                <span class="scale-desc">Conversaci√≥n - Tr√°fico ligero</span>
                                <span class="scale-status">‚ö†Ô∏è Moderado</span>
                            </div>
                            <div class="scale-item dangerous">
                                <span class="scale-db">71-85 dB</span>
                                <span class="scale-desc">Tr√°fico intenso - Aspiradora</span>
                                <span class="scale-status">‚ö° Molesto</span>
                            </div>
                            <div class="scale-item harmful">
                                <span class="scale-db">85+ dB</span>
                                <span class="scale-desc">Construcci√≥n - M√∫sica alta</span>
                                <span class="scale-status">‚ùå Peligroso</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="capsule nature-capsule">
                    <div class="capsule-header">
                        <div class="capsule-icon">ü¶ã</div>
                        <h3>El Ruido y la Naturaleza</h3>
                    </div>
                    <div class="capsule-content">
                        <div class="nature-effects">
                            <div class="nature-item">
                                <div class="nature-icon">üê¶</div>
                                <div class="nature-text">
                                    <h4>Comunicaci√≥n de Aves</h4>
                                    <p>El ruido urbano interfiere con los cantos de apareamiento y llamadas de alerta</p>
                                    <div class="impact-bar">
                                        <div class="impact-fill" style="width: 80%;"></div>
                                        <span>80% de interferencia</span>
                                    </div>
                                </div>
                            </div>
                            <div class="nature-item">
                                <div class="nature-icon">ü¶á</div>
                                <div class="nature-text">
                                    <h4>Murci√©lagos y Ecolocalizaci√≥n</h4>
                                    <p>Los sonidos artificiales confunden su sistema de navegaci√≥n natural</p>
                                    <div class="impact-bar">
                                        <div class="impact-fill" style="width: 65%;"></div>
                                        <span>65% de interferencia</span>
                                    </div>
                                </div>
                            </div>
                            <div class="nature-item">
                                <div class="nature-icon">üêù</div>
                                <div class="nature-text">
                                    <h4>Insectos Polinizadores</h4>
                                    <p>Las vibraciones del tr√°fico alteran sus patrones de vuelo y polinizaci√≥n</p>
                                    <div class="impact-bar">
                                        <div class="impact-fill" style="width: 45%;"></div>
                                        <span>45% de interferencia</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="ecosystem-info">
                            <h4>üåø Impacto en el Ecosistema</h4>
                            <div class="ecosystem-grid">
                                <div class="eco-item">
                                    <span class="eco-emoji">üå±</span>
                                    <span>Migraci√≥n de especies</span>
                                </div>
                                <div class="eco-item">
                                   <span class="eco-emoji">üèûÔ∏è</span>
                                   <span>Fragmentaci√≥n del h√°bitat</span>
                               </div>
                               <div class="eco-item">
                                   <span class="eco-emoji">üîÑ</span>
                                   <span>Interrupci√≥n de ciclos naturales</span>
                               </div>
                               <div class="eco-item">
                                   <span class="eco-emoji">‚öñÔ∏è</span>
                                   <span>Desequilibrio ecol√≥gico</span>
                               </div>
                           </div>
                       </div>
                   </div>
               </div>
           </div>
       </div>

       <!-- ENCUESTA A LA COMUNIDAD -->
       <div class="survey-section">
           <h2 style="text-align: center; color: #2c3e50; margin: 40px 0 30px;">üìä Encuesta a la Comunidad</h2>
           
           <div class="survey-container">
               <div class="survey-intro">
                   <h3>üó£Ô∏è ¬°Tu opini√≥n importa!</h3>
                   <p>Ay√∫danos a entender mejor la problem√°tica del ruido en Suba. Tus respuestas contribuir√°n a crear soluciones m√°s efectivas.</p>
               </div>

               <div class="survey-questions">
                   <div class="question-card">
                       <h4>1. ¬øQu√© sonidos te molestan m√°s en tu barrio?</h4>
                       <div class="options-grid">
                           <button class="option-btn" data-question="q1" data-answer="trafico">
                               üöó Tr√°fico vehicular
                           </button>
                           <button class="option-btn" data-question="q1" data-answer="construccion">
                               üèóÔ∏è Construcci√≥n
                           </button>
                           <button class="option-btn" data-question="q1" data-answer="musica">
                               üéµ M√∫sica alta
                           </button>
                           <button class="option-btn" data-question="q1" data-answer="motocicletas">
                               üèçÔ∏è Motocicletas
                           </button>
                           <button class="option-btn" data-question="q1" data-answer="vendedores">
                               üì¢ Vendedores ambulantes
                           </button>
                           <button class="option-btn" data-question="q1" data-answer="animales">
                               üêï Ladridos de perros
                           </button>
                       </div>
                   </div>

                   <div class="question-card">
                       <h4>2. ¬øCrees que la contaminaci√≥n sonora es un problema en Suba?</h4>
                       <div class="options-grid">
                           <button class="option-btn" data-question="q2" data-answer="muy_grave">
                               üî¥ Muy grave
                           </button>
                           <button class="option-btn" data-question="q2" data-answer="grave">
                               üü† Grave
                           </button>
                           <button class="option-btn" data-question="q2" data-answer="moderado">
                               üü° Moderado
                           </button>
                           <button class="option-btn" data-question="q2" data-answer="leve">
                               üü¢ Leve
                           </button>
                           <button class="option-btn" data-question="q2" data-answer="no_problema">
                               ‚úÖ No es problema
                           </button>
                       </div>
                   </div>

                   <div class="question-card">
                       <h4>3. ¬øQu√© sonidos de la naturaleza te gustar√≠a escuchar m√°s?</h4>
                       <div class="options-grid">
                           <button class="option-btn" data-question="q3" data-answer="aves">
                               üê¶ Cantos de aves
                           </button>
                           <button class="option-btn" data-question="q3" data-answer="agua">
                               üíß Sonido del agua
                           </button>
                           <button class="option-btn" data-question="q3" data-answer="viento">
                               üçÉ Viento entre √°rboles
                           </button>
                           <button class="option-btn" data-question="q3" data-answer="insectos">
                               ü¶ó Grillos y cigarras
                           </button>
                           <button class="option-btn" data-question="q3" data-answer="lluvia">
                               üåßÔ∏è Lluvia suave
                           </button>
                           <button class="option-btn" data-question="q3" data-answer="silencio">
                               ü§´ Silencio total
                           </button>
                       </div>
                   </div>
               </div>

               <div class="results-section" id="surveyResults" style="display: none;">
                   <h3>üìà Resultados en Tiempo Real</h3>
                   <div class="results-grid">
                       <div class="result-chart" id="chart1"></div>
                       <div class="result-chart" id="chart2"></div>
                       <div class="result-chart" id="chart3"></div>
                   </div>
                   <button class="survey-btn" onclick="resetSurvey()">üîÑ Reiniciar Encuesta</button>
               </div>

               <button class="survey-btn" id="showResultsBtn" onclick="showResults()" disabled>
                   üìä Ver Resultados
               </button>
           </div>
       </div>
   </div>

   <script>
       const zoneData = {
           nature: {
               title: "üå≥ Humedal La Conejera",
               description: "Ambiente natural con sonidos de aves y agua",
               decibels: 40,
               status: "Sonido Saludable",
               statusColor: "#2ecc71",
               audioDescription: "Escucha: Cantos de aves, agua fluyendo, viento entre los √°rboles",
               healthImpact: "‚úÖ Promueve la relajaci√≥n y reduce el estr√©s",
               recommendation: "¬°Disfruta estos espacios! Son refugios sonoros naturales.",
               audioFile: "../assets/audio/nature.aac" // Ruta al archivo MP3
           },
           traffic: {
               title: "üöó V√≠a Principal (Av. Suba)",
               description: "Tr√°fico vehicular constante con buses y carros",
               decibels: 85,
               status: "Sonido de Riesgo",
               statusColor: "#e67e22",
               audioDescription: "Escucha: Motores, bocinas, frenadas, buses acelerando",
               healthImpact: "‚ö†Ô∏è Puede causar fatiga auditiva y estr√©s",
               recommendation: "Usa protecci√≥n auditiva en exposiciones prolongadas.",
               audioFile: "../assets/audio/V√≠aPrincipal.aac" // Ruta al archivo MP3
           },
           construction: {
               title: "üèóÔ∏è Zona de Construcci√≥n",
               description: "Sitio de construcci√≥n con maquinaria pesada",
               decibels: 90,
               status: "Sonido Perjudicial",
               statusColor: "#e74c3c",
               audioDescription: "Escucha: Taladros, martillos neum√°ticos, maquinaria pesada",
               healthImpact: "‚ùå Puede da√±ar la audici√≥n y causar problemas de sue√±o",
               recommendation: "Evita la exposici√≥n prolongada. Exige cumplimiento de horarios.",
               audioFile: "../assets/audio/construccion.aac" // Ruta al archivo MP3
           },
           residential: {
               title: "üè† Zona Residencial",
               description: "Vida cotidiana en hogares y colegios",
               decibels: 65,
               status: "Sonido Molesto",
               statusColor: "#f39c12",
               audioDescription: "Escucha: Televisi√≥n, conversaciones, m√∫sica, ni√±os jugando",
               healthImpact: "‚ö° Puede interferir con la concentraci√≥n y el descanso",
               recommendation: "Busca momentos de silencio y espacios m√°s tranquilos.",
               audioFile: "../assets/audio/colegio.aac" // Ruta al archivo MP3
           }
       };

       let currentAudio = null;

       document.querySelectorAll('.zone').forEach(zone => {
           zone.addEventListener('click', function() {
               const zoneType = this.dataset.zone;
               showZoneInfo(zoneType);
               
               // Remove active class from all zones
               document.querySelectorAll('.zone').forEach(z => z.classList.remove('active'));
               // Add active class to clicked zone
               this.classList.add('active');
           });
       });

       function showZoneInfo(zoneType) {
           const data = zoneData[zoneType];
           const panel = document.getElementById('infoPanel');
           const content = document.getElementById('panelContent');
           
           // Stop any currently playing audio
           if (currentAudio) {
               currentAudio.pause();
               currentAudio.currentTime = 0;
               currentAudio = null;
           }
           
           content.innerHTML = `
               <h3>${data.title}</h3>
               <p style="margin: 10px 0; opacity: 0.9;">${data.description}</p>
               
               <div style="margin: 20px 0;">
                   <h4>üìä Nivel de Ruido</h4>
                   <div class="decibel-meter">
                       <div class="decibel-indicator" style="width: ${(data.decibels / 100) * 100}%"></div>
                   </div>
                   <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 10px;">
                       <strong>${data.decibels} dB</strong>
                       <span style="color: ${data.statusColor}; font-weight: bold;">${data.status}</span>
                   </div>
               </div>

               <div style="margin: 20px 0;">
                   <h4>üéß ${data.audioDescription}</h4>
                   <div class="audio-controls">
                       <button class="play-btn" onclick="playZoneAudio('${zoneType}')" id="playBtn-${zoneType}">
                           ‚ñ∂Ô∏è Reproducir Sonido
                       </button>
                   </div>
                   <div id="audioError-${zoneType}" style="display: none;"></div>
               </div>

               <div style="margin: 20px 0;">
                   <h4>üè• Impacto en la Salud</h4>
                   <p style="margin: 5px 0;">${data.healthImpact}</p>
               </div>

               <div style="margin: 20px 0;">
                   <h4>üí° Recomendaci√≥n</h4>
                   <p style="margin: 5px 0; font-style: italic;">${data.recommendation}</p>
               </div>
           `;
           
           panel.classList.add('active');
       }

       function closePanel() {
           const panel = document.getElementById('infoPanel');
           panel.classList.remove('active');
           
           // Remove active class from all zones
           document.querySelectorAll('.zone').forEach(z => z.classList.remove('active'));
           
           // Stop any playing audio
           if (currentAudio) {
               currentAudio.pause();
               currentAudio.currentTime = 0;
               currentAudio = null;
           }
       }

       function playZoneAudio(zoneType) {
           const data = zoneData[zoneType];
           const button = document.getElementById(`playBtn-${zoneType}`);
           const errorDiv = document.getElementById(`audioError-${zoneType}`);
           
           // Stop any currently playing audio
           if (currentAudio) {
               currentAudio.pause();
               currentAudio.currentTime = 0;
           }
           
           // Create new audio element
           currentAudio = new Audio(data.audioFile);
           
           // Update button state
           button.innerHTML = "üîä Reproduciendo...";
           button.disabled = true;
           
           // Hide any previous error messages
           errorDiv.style.display = 'none';
           
           // Event listeners for the audio
           currentAudio.addEventListener('loadstart', function() {
               console.log(`Cargando audio: ${data.audioFile}`);
           });
           
           currentAudio.addEventListener('canplay', function() {
               console.log(`Audio listo para reproducir: ${data.audioFile}`);
           });
           
           currentAudio.addEventListener('play', function() {
               console.log(`Reproduciendo: ${data.title}`);
           });
           
           currentAudio.addEventListener('ended', function() {
               button.innerHTML = "‚ñ∂Ô∏è Reproducir Sonido";
               button.disabled = false;
               currentAudio = null;
           });
           
           currentAudio.addEventListener('error', function(e) {
               console.error(`Error al cargar audio: ${data.audioFile}`, e);
               button.innerHTML = "‚ùå Error al cargar";
               button.disabled = false;
               
               // Show error message
               errorDiv.innerHTML = `
                   <div class="error-message">
                       <strong>Error:</strong> No se pudo cargar el archivo de audio.<br>
                       <small>Verifica que el archivo ${data.audioFile} existe.</small>
                   </div>
               `;
               errorDiv.style.display = 'block';
               
               // Reset button after 3 seconds
               setTimeout(() => {
                   button.innerHTML = "‚ñ∂Ô∏è Reproducir Sonido";
               }, 3000);
               
               currentAudio = null;
           });
           
           // Attempt to play the audio
           const playPromise = currentAudio.play();
           
           if (playPromise !== undefined) {
               playPromise.then(() => {
                   // Audio started playing successfully
               }).catch(error => {
                   console.error('Error al reproducir audio:', error);
                   button.innerHTML = "‚ùå Error al reproducir";
                   button.disabled = false;
                   
                   errorDiv.innerHTML = `
                       <div class="error-message">
                           <strong>Error:</strong> No se pudo reproducir el audio.<br>
                           <small>El navegador puede haber bloqueado la reproducci√≥n autom√°tica.</small>
                       </div>
                   `;
                   errorDiv.style.display = 'block';
                   
                   setTimeout(() => {
                       button.innerHTML = "‚ñ∂Ô∏è Reproducir Sonido";
                   }, 3000);
                   
                   currentAudio = null;
               });
           }
       }

       // Close panel when clicking outside
       document.addEventListener('click', function(event) {
           const panel = document.getElementById('infoPanel');
           const zones = document.querySelectorAll('.zone');
           let clickedZone = false;
           
           zones.forEach(zone => {
               if (zone.contains(event.target)) {
                   clickedZone = true;
               }
           });
           
           if (!panel.contains(event.target) && !clickedZone && panel.classList.contains('active')) {
               closePanel();
           }
       });

       // FUNCIONALIDAD DE LA ENCUESTA
       let surveyAnswers = {
           q1: null,
           q2: null,
           q3: null
       };

       // Datos simulados para los resultados
       const surveyData = {
           q1: {
               title: "Sonidos m√°s molestos",
               data: {
                   trafico: 45,
                   construccion: 25,
                   musica: 15,
                   motocicletas: 8,
                   vendedores: 4,
                   animales: 3
               },
               labels: {
                   trafico: "üöó Tr√°fico",
                   construccion: "üèóÔ∏è Construcci√≥n",
                   musica: "üéµ M√∫sica alta",
                   motocicletas: "üèçÔ∏è Motocicletas",
                   vendedores: "üì¢ Vendedores",
                   animales: "üêï Ladridos"
               }
           },
           q2: {
               title: "Gravedad del problema",
               data: {
                   muy_grave: 35,
                   grave: 30,
                   moderado: 20,
                   leve: 10,
                   no_problema: 5
               },
               labels: {
                   muy_grave: "üî¥ Muy grave",
                   grave: "üü† Grave",
                   moderado: "üü° Moderado",
                   leve: "üü¢ Leve",
                   no_problema: "‚úÖ No problema"
               }
           },
           q3: {
               title: "Sonidos naturales preferidos",
               data: {
                   aves: 40,
                   agua: 25,
                   viento: 15,
                   insectos: 8,
                   lluvia: 7,
                   silencio: 5
               },
               labels: {
                   aves: "üê¶ Aves",
                   agua: "üíß Agua",
                   viento: "üçÉ Viento",
                   insectos: "ü¶ó Insectos",
                   lluvia: "üåßÔ∏è Lluvia",
                   silencio: "ü§´ Silencio"
               }
           }
       };

       // Manejo de clics en opciones
       document.addEventListener('click', function(event) {
           if (event.target.classList.contains('option-btn')) {
               const question = event.target.dataset.question;
               const answer = event.target.dataset.answer;
               
               // Remover selecci√≥n anterior
               document.querySelectorAll(`[data-question="${question}"]`).forEach(btn => {
                   btn.classList.remove('selected');
               });
               
               // Seleccionar nueva opci√≥n
               event.target.classList.add('selected');
               surveyAnswers[question] = answer;
               
               // Marcar pregunta como respondida
               const questionCard = event.target.closest('.question-card');
               questionCard.classList.add('answered');
               
               // Verificar si todas las preguntas est√°n respondidas
               checkSurveyComplete();
           }
       });

       function checkSurveyComplete() {
           const allAnswered = Object.values(surveyAnswers).every(answer => answer !== null);
           const showResultsBtn = document.getElementById('showResultsBtn');
           
           if (allAnswered) {
               showResultsBtn.disabled = false;
               showResultsBtn.style.background = 'linear-gradient(45deg, #2ecc71, #27ae60)';
               showResultsBtn.innerHTML = 'üìä ¬°Ver Resultados Ahora!';
           }
       }

       function showResults() {
           // Actualizar datos con la respuesta del usuario
           Object.keys(surveyAnswers).forEach(question => {
               if (surveyAnswers[question]) {
                   surveyData[question].data[surveyAnswers[question]] += 1;
               }
           });
           
           // Mostrar secci√≥n de resultados
           const resultsSection = document.getElementById('surveyResults');
           resultsSection.style.display = 'block';
           
           // Generar gr√°ficos
           generateCharts();
           
           // Scroll suave a resultados
           resultsSection.scrollIntoView({ behavior: 'smooth' });
           
           // Ocultar bot√≥n de resultados
           document.getElementById('showResultsBtn').style.display = 'none';
       }

       function generateCharts() {
           Object.keys(surveyData).forEach((questionKey, index) => {
               const chartContainer = document.getElementById(`chart${index + 1}`);
               const questionData = surveyData[questionKey];
               
               const total = Object.values(questionData.data).reduce((sum, value) => sum + value, 0);
               
               let chartHTML = `<div class="chart-title">${questionData.title}</div>`;
               
               Object.keys(questionData.data).forEach(option => {
                   const value = questionData.data[option];
                   const percentage = Math.round((value / total) * 100);
                   
                   chartHTML += `
                       <div class="chart-bar">
                           <div class="bar-label">${questionData.labels[option]}</div>
                           <div class="bar-visual">
                               <div class="bar-fill" style="width: ${percentage}%"></div>
                           </div>
                           <div class="bar-percentage">${percentage}%</div>
                       </div>
                   `;
               });
               
               chartContainer.innerHTML = chartHTML;
               
               // Animar las barras
               setTimeout(() => {
                   chartContainer.querySelectorAll('.bar-fill').forEach((bar, barIndex) => {
                       setTimeout(() => {
                           bar.style.width = bar.style.width;
                       }, barIndex * 100);
                   });
               }, 300);
           });
       }

       function resetSurvey() {
           // Limpiar respuestas
           surveyAnswers = { q1: null, q2: null, q3: null };
           
           // Remover selecciones
           document.querySelectorAll('.option-btn').forEach(btn => {
               btn.classList.remove('selected');
           });
           
           // Remover marcas de respondido
           document.querySelectorAll('.question-card').forEach(card => {
               card.classList.remove('answered');
           });
           
           // Ocultar resultados
           document.getElementById('surveyResults').style.display = 'none';
           
           // Mostrar bot√≥n de resultados
           const showResultsBtn = document.getElementById('showResultsBtn');
           showResultsBtn.style.display = 'block';
           showResultsBtn.disabled = true;
           showResultsBtn.style.background = 'linear-gradient(45deg, #9b59b6, #8e44ad)';
           showResultsBtn.innerHTML = 'üìä Ver Resultados';
           
           // Restaurar datos originales
           surveyData.q1.data = { trafico: 45, construccion: 25, musica: 15, motocicletas: 8, vendedores: 4, animales: 3 };
           surveyData.q2.data = { muy_grave: 35, grave: 30, moderado: 20, leve: 10, no_problema: 5 };
           surveyData.q3.data = { aves: 40, agua: 25, viento: 15, insectos: 8, lluvia: 7, silencio: 5 };
           
           // Scroll a encuesta
           document.querySelector('.survey-section').scrollIntoView({ behavior: 'smooth' });
       }

       // Add some initial animation
       window.addEventListener('load', function() {
           document.querySelectorAll('.zone').forEach((zone, index) => {
               setTimeout(() => {
                   zone.style.animation = 'pulse 2s ease-in-out';
                   setTimeout(() => {
                       zone.style.animation = '';
                   }, 2000);
               }, index * 500);
           });
       });
   </script>
</body>
</html>